tc:
  eqpsim:
    defaults:
      default-wait-timeout-sec: 60
      default-handshake-timeout-sec: 60

    # socketType 정의(3종)
    socket-types:
      LINE_LF:
        kind: LINE_END
        line-ending: LF

      LINE_CR:
        kind: LINE_END
        line-ending: CR

      LINE_CRLF:
        kind: LINE_END
        line-ending: CRLF

      STX_ETX:
        kind: START_END
        start-hex: "02"
        end-hex: "03"

      RX_REGEX:
        kind: REGEX
        regex-pattern: "\\{[^}]+\\}"

    # endpoint 정의
    endpoints:
      passive:
        P1:
          bind: "0.0.0.0:31001"
          max-conn: 20
        P2:
          bind: "0.0.0.0:31002"
          max-conn: 20
        P3:
          bind: "0.0.0.0:31003"
          max-conn: 20

      active:
        A1:
          target: "192.168.0.14:6101"
          conn-count: 20
        A2:
          target: "192.168.0.14:6101"
          conn-count: 20
        A3:
          target: "192.168.0.14:6103"
          conn-count: 20

      active-backoff:
        initial-sec: 1
        max-sec: 30
        multiplier: 2.0

    # profile 정의(시나리오 파일)
    profiles:
      scenario_case1:
        type: SCENARIO
        scenario-file: "config/scenario/normal_scenario_case1.md"

      scenario_trace_case1:
        type: SCENARIO
        scenario-file: "config/scenario/trace_scenario_case1.md"

      scenario_fault_disconnect:
        type: SCENARIO
        scenario-file: "config/scenario/fault_disconnect_case1.md"

    # ✅ EQP 정의(샘플 6대)
    # - 실제 120대/60대 구성은 아래 tools/gen-eqps.ps1로 생성하는 것을 권장
    eqps:
      # PASSIVE (TC가 접속)
      # TEST101:
      #   mode: PASSIVE
      #   endpoint: P1
      #   socket-type: LINE_LF
      #   profile: scenario_case1
      #   vars:
      #     lotid: "TESTLOT101"
      #     carid: "TESTCAR101"
      #     portid: "1"
      #     portstatus: "IDLE"

      # TEST102:
      #   mode: PASSIVE
      #   endpoint: P2
      #   socket-type: LINE_CR
      #   profile: scenario_fault_disconnect
      #   vars:
      #     lotid: "TESTLOT102"
      #     carid: "TESTCAR102"
      #     portid: "1"
      #     portstatus: "IDLE"

      # TEST103:
      #   mode: PASSIVE
      #   endpoint: P3
      #   socket-type: LINE_CRLF
      #   profile: scenario_case1
      #   vars:
      #     lotid: "TESTLOT103"
      #     carid: "TESTCAR103"
      #     portid: "1"
      #     portstatus: "IDLE"

      # ACTIVE (시뮬레이터가 TC로 접속)
      DG_SOCKET_P01:
        mode: ACTIVE
        endpoint: A1
        socket-type: LINE_LF
        profile: scenario_trace_case1
        vars:
          lotid: "TESTLOT201"
          carid: "TESTCAR201"
          portid: "1"
          portstatus: "IDLE"

      # TEST201:
      #   mode: ACTIVE
      #   endpoint: A1
      #   socket-type: LINE_LF
      #   profile: scenario_case1
      #   vars:
      #     lotid: "TESTLOT201"
      #     carid: "TESTCAR201"
      #     portid: "1"
      #     portstatus: "IDLE"

      # TEST202:
      #   mode: ACTIVE
      #   endpoint: A2
      #   socket-type: LINE_CR
      #   profile: scenario_case1
      #   vars:
      #     lotid: "TESTLOT202"
      #     carid: "TESTCAR202"
      #     portid: "1"
      #     portstatus: "IDLE"

      # TEST203:
      #   mode: ACTIVE
      #   endpoint: A3
      #   socket-type: LINE_CRLF
      #   profile: scenario_fault_disconnect
      #   vars:
      #     lotid: "TESTLOT203"
      #     carid: "TESTCAR203"
      #     portid: "1"
      #     portstatus: "IDLE"
